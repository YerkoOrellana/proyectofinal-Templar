(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{3911:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(5155),a=s(2115),l=s(5695),c=s(6515);function n(){let{items:e,totalPrice:t}=(0,c._)(),s=(0,l.useRouter)(),[n,i]=(0,a.useState)(!1),d=.19*t,o=t>1e5?0:2990,x=t+d+o,m=async()=>{if(0!==e.length){i(!0);try{await new Promise(e=>setTimeout(e,1500)),s.push("/checkout")}catch(e){console.error("Error al procesar el checkout:",e),alert("Hubo un error al procesar tu pedido. Por favor, intenta nuevamente.")}finally{i(!1)}}};return(0,r.jsxs)("div",{className:"border rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Resumen del pedido"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsxs)("span",{children:["$",t.toLocaleString("es-CL")," CLP"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"IVA (19%)"}),(0,r.jsxs)("span",{children:["$",d.toLocaleString("es-CL")," CLP"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Env\xedo"}),(0,r.jsx)("span",{children:0===o?"Gratis":"$".concat(o.toLocaleString("es-CL")," CLP")})]}),(0,r.jsx)("div",{className:"border-t pt-3 mt-3",children:(0,r.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{children:["$",x.toLocaleString("es-CL")," CLP"]})]})})]}),(0,r.jsx)("button",{onClick:m,disabled:0===e.length||n,className:"mt-6 w-full bg-black text-white py-3 px-6 hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Procesando...":"Proceder al pago"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"Los impuestos y gastos de env\xedo se calculan en el total"})]})}},5250:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(5155),a=s(6766),l=s(6874),c=s.n(l);let n=(0,s(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var i=s(6515);function d(){let{items:e,updateQuantity:t,removeFromCart:s}=(0,i._)();return 0===e.length?(0,r.jsxs)("div",{className:"text-center py-12 border rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-medium",children:"Tu carrito est\xe1 vac\xedo"}),(0,r.jsx)("p",{className:"mt-2 text-gray-500",children:"A\xf1ade algunos productos para continuar"}),(0,r.jsx)(c(),{href:"/productos",className:"mt-4 inline-block underline",children:"Ver productos"})]}):(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cantidad"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-16 w-16 relative flex-shrink-0",children:(0,r.jsx)(a.default,{src:e.product.image||"/placeholder.svg",alt:e.product.name,fill:!0,className:"object-cover"})}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)(c(),{href:"/productos/".concat(e.product.slug),className:"text-sm font-medium hover:underline",children:e.product.name})})]})}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:["$",e.product.price.toLocaleString("es-CL")," CLP"]}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 w-24",children:[(0,r.jsx)("button",{type:"button",onClick:()=>t(e.product.id,e.quantity-1),className:"px-2 py-1 text-gray-600 hover:bg-gray-100",children:"-"}),(0,r.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:s=>t(e.product.id,Number.parseInt(s.target.value)||1),className:"w-10 text-center border-x border-gray-300 py-1"}),(0,r.jsx)("button",{type:"button",onClick:()=>t(e.product.id,e.quantity+1),className:"px-2 py-1 text-gray-600 hover:bg-gray-100",children:"+"})]})}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:["$",(e.product.price*e.quantity).toLocaleString("es-CL")," CLP"]}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsx)("button",{onClick:()=>s(e.product.id),className:"text-red-600 hover:text-red-800",children:(0,r.jsx)(n,{className:"h-5 w-5"})})})]},e.product.id))})]})})}},6515:(e,t,s)=>{"use strict";s.d(t,{CartProvider:()=>n,_:()=>c});var r=s(5155),a=s(2115);let l=(0,a.createContext)(void 0);function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useCart debe ser usado dentro de un CartProvider");return e}function n(e){let{children:t}=e,[s,c]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let t=JSON.parse(e);Array.isArray(t)?c(t):console.warn("El carrito guardado no tiene el formato esperado.")}catch(e){console.error("Error al cargar el carrito:",e)}},[]),(0,a.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(s))},[s]);let n=s.reduce((e,t)=>e+t.quantity,0),i=s.reduce((e,t)=>e+t.product.price*t.quantity,0),d=e=>{c(t=>t.filter(t=>t.product.id!==e))};return(0,r.jsx)(l.Provider,{value:{items:s,totalItems:n,totalPrice:i,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c(s=>{let r=s.findIndex(t=>t.product.id===e.id);if(!(r>=0))return[...s,{product:e,quantity:t}];{let e=[...s];return e[r].quantity+=t,e}})},removeFromCart:d,updateQuantity:(e,t)=>{if(t<=0){d(e);return}c(s=>s.map(s=>s.product.id===e?{...s,quantity:t}:s))},clearCart:()=>{c([])}},children:t})}},7352:(e,t,s)=>{Promise.resolve().then(s.bind(s,5250)),Promise.resolve().then(s.bind(s,3911)),Promise.resolve().then(s.bind(s,7969)),Promise.resolve().then(s.t.bind(s,6874,23))},7969:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var r=s(5155),a=s(2115),l=s(6874),c=s.n(l),n=s(5695),i=s(7809),d=s(7924),o=s(4416),x=s(4783),m=s(6515);function u(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(""),u=(0,n.usePathname)(),{totalItems:h,totalPrice:p}=(0,m._)(),f=e=>{e.preventDefault(),console.log("Buscando: ".concat(s))},j=[{name:"Productos",href:"/productos"},{name:"Info",href:"/info"},{name:"Login",href:"/login"},{name:"Registrarse",href:"/registro"},{name:"Contacto",href:"/contacto"}];return(0,r.jsx)("header",{className:"border-b border-gray-200",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)(c(),{href:"/",className:"flex items-center space-x-2",children:(0,r.jsx)("img",{src:"/assets/logo/Recurso_22x.png",alt:"Templar Logo",className:"h-8 w-auto"})}),(0,r.jsxs)(c(),{href:"/carrito",className:"flex items-center",children:[(0,r.jsx)(i.A,{className:"h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"mr-2",children:h})," ",(0,r.jsx)("span",{children:"|"}),(0,r.jsxs)("span",{className:"ml-2",children:["$",p.toLocaleString("es-CL")]})," "]})]}),(0,r.jsxs)("nav",{className:"hidden md:flex justify-between items-center py-4",children:[(0,r.jsx)("ul",{className:"flex space-x-8",children:j.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:e.href,className:"text-sm uppercase tracking-wider ".concat(u===e.href?"font-semibold":""),children:e.name})},e.name))}),(0,r.jsxs)("form",{onSubmit:f,className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar",value:s,onChange:e=>l(e.target.value),className:"py-1 pl-2 pr-8 border-b border-black focus:outline-none text-sm w-40"}),(0,r.jsx)("button",{type:"submit",className:"absolute right-0 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"md:hidden flex justify-between items-center py-4",children:[(0,r.jsx)("button",{onClick:()=>t(!e),"aria-label":"Toggle menu",children:e?(0,r.jsx)(o.A,{className:"h-6 w-6"}):(0,r.jsx)(x.A,{className:"h-6 w-6"})}),(0,r.jsxs)("form",{onSubmit:f,className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar",value:s,onChange:e=>l(e.target.value),className:"py-1 pl-2 pr-8 border-b border-black focus:outline-none text-sm w-32"}),(0,r.jsx)("button",{type:"submit",className:"absolute right-0 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})]})]}),e&&(0,r.jsx)("div",{className:"md:hidden py-4 border-t border-gray-200",children:(0,r.jsx)("ul",{className:"space-y-4",children:j.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:e.href,className:"block text-sm uppercase tracking-wider ".concat(u===e.href?"font-semibold":""),onClick:()=>t(!1),children:e.name})},e.name))})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[721,766,441,684,358],()=>t(7352)),_N_E=e.O()}]);