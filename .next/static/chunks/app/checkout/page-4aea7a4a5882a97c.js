(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{1167:(e,r,s)=>{"use strict";s.d(r,{default:()=>c});var a=s(5155),t=s(6515),l=s(6766);function c(){let{items:e,totalPrice:r}=(0,t._)(),s=.19*r,c=r>1e5?0:2990,d=r+s+c;return(0,a.jsxs)("div",{className:"bg-white p-6 border rounded-lg sticky top-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Resumen del pedido"}),(0,a.jsx)("div",{className:"space-y-4 mb-6",children:0===e.length?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No hay productos en el carrito"}):e.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-16 w-16 relative flex-shrink-0",children:(0,a.jsx)(l.default,{src:e.product.image||"/placeholder.svg",alt:e.product.name,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"ml-4 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Cantidad: ",e.quantity]})]}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:["$",(e.product.price*e.quantity).toLocaleString("es-CL")]})]},e.product.id))}),(0,a.jsxs)("div",{className:"space-y-2 border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["$",r.toLocaleString("es-CL")," CLP"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"IVA (19%)"}),(0,a.jsxs)("span",{children:["$",s.toLocaleString("es-CL")," CLP"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Env\xedo"}),(0,a.jsx)("span",{children:0===c?"Gratis":"$".concat(c.toLocaleString("es-CL")," CLP")})]}),(0,a.jsx)("div",{className:"border-t pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["$",d.toLocaleString("es-CL")," CLP"]})]})})]})]})}},1405:(e,r,s)=>{"use strict";s.d(r,{default:()=>d});var a=s(5155),t=s(2115),l=s(5695),c=s(6515);function d(){let e=(0,l.useRouter)(),{items:r,totalPrice:s,clearCart:d}=(0,c._)(),[n,o]=(0,t.useState)(!1),[i,m]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",postalCode:"",cardName:"",cardNumber:"",cardExpiry:"",cardCvc:""}),[u,x]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",postalCode:"",cardName:"",cardNumber:"",cardExpiry:"",cardCvc:""}),h=e=>{let{name:r,value:s}=e.target;m(e=>({...e,[r]:s})),u[r]&&x(e=>({...e,[r]:""}))},p=()=>{let e=!0,r={...u};return Object.keys(i).forEach(s=>{i[s].trim()||(r[s]="Este campo es requerido",e=!1)}),i.email&&!/\S+@\S+\.\S+/.test(i.email)&&(r.email="Email inv\xe1lido",e=!1),i.cardNumber&&!/^\d{16}$/.test(i.cardNumber.replace(/\s/g,""))&&(r.cardNumber="N\xfamero de tarjeta inv\xe1lido",e=!1),i.cardExpiry&&!/^\d{2}\/\d{2}$/.test(i.cardExpiry)&&(r.cardExpiry="Formato inv\xe1lido (MM/YY)",e=!1),i.cardCvc&&!/^\d{3,4}$/.test(i.cardCvc)&&(r.cardCvc="CVC inv\xe1lido",e=!1),x(r),e},b=async r=>{if(r.preventDefault(),p()){o(!0);try{await new Promise(e=>setTimeout(e,2e3)),d(),e.push("/checkout/confirmacion")}catch(e){console.error("Error al procesar el pago:",e),alert("Error al procesar el pago. Por favor, intenta nuevamente.")}finally{o(!1)}}};return(0,a.jsxs)("form",{onSubmit:b,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 border rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Datos personales"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium mb-1",children:"Nombre"}),(0,a.jsx)("input",{id:"firstName",name:"firstName",type:"text",value:i.firstName,onChange:h,className:"w-full px-3 py-2 border ".concat(u.firstName?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.firstName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium mb-1",children:"Apellido"}),(0,a.jsx)("input",{id:"lastName",name:"lastName",type:"text",value:i.lastName,onChange:h,className:"w-full px-3 py-2 border ".concat(u.lastName?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.lastName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.lastName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",value:i.email,onChange:h,className:"w-full px-3 py-2 border ".concat(u.email?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("input",{id:"phone",name:"phone",type:"tel",value:i.phone,onChange:h,className:"w-full px-3 py-2 border ".concat(u.phone?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.phone&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.phone})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 border rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Direcci\xf3n de env\xedo"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium mb-1",children:"Direcci\xf3n"}),(0,a.jsx)("input",{id:"address",name:"address",type:"text",value:i.address,onChange:h,className:"w-full px-3 py-2 border ".concat(u.address?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.address&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.address})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium mb-1",children:"Ciudad"}),(0,a.jsx)("input",{id:"city",name:"city",type:"text",value:i.city,onChange:h,className:"w-full px-3 py-2 border ".concat(u.city?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.city&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.city})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium mb-1",children:"Regi\xf3n"}),(0,a.jsx)("input",{id:"state",name:"state",type:"text",value:i.state,onChange:h,className:"w-full px-3 py-2 border ".concat(u.state?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.state&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.state})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"postalCode",className:"block text-sm font-medium mb-1",children:"C\xf3digo Postal"}),(0,a.jsx)("input",{id:"postalCode",name:"postalCode",type:"text",value:i.postalCode,onChange:h,className:"w-full px-3 py-2 border ".concat(u.postalCode?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.postalCode&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.postalCode})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 border rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Informaci\xf3n de pago"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"cardName",className:"block text-sm font-medium mb-1",children:"Nombre en la tarjeta"}),(0,a.jsx)("input",{id:"cardName",name:"cardName",type:"text",value:i.cardName,onChange:h,className:"w-full px-3 py-2 border ".concat(u.cardName?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.cardName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.cardName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"cardNumber",className:"block text-sm font-medium mb-1",children:"N\xfamero de tarjeta"}),(0,a.jsx)("input",{id:"cardNumber",name:"cardNumber",type:"text",placeholder:"XXXX XXXX XXXX XXXX",value:i.cardNumber,onChange:h,className:"w-full px-3 py-2 border ".concat(u.cardNumber?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.cardNumber&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.cardNumber})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"cardExpiry",className:"block text-sm font-medium mb-1",children:"Fecha de expiraci\xf3n"}),(0,a.jsx)("input",{id:"cardExpiry",name:"cardExpiry",type:"text",placeholder:"MM/YY",value:i.cardExpiry,onChange:h,className:"w-full px-3 py-2 border ".concat(u.cardExpiry?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.cardExpiry&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.cardExpiry})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"cardCvc",className:"block text-sm font-medium mb-1",children:"CVC"}),(0,a.jsx)("input",{id:"cardCvc",name:"cardCvc",type:"text",placeholder:"XXX",value:i.cardCvc,onChange:h,className:"w-full px-3 py-2 border ".concat(u.cardCvc?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-1 focus:ring-black")}),u.cardCvc&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u.cardCvc})]})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:n||0===r.length,className:"w-full bg-black text-white py-3 px-6 rounded-md hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Procesando...":"Completar compra"})]})}},3492:(e,r,s)=>{Promise.resolve().then(s.bind(s,1405)),Promise.resolve().then(s.bind(s,7969)),Promise.resolve().then(s.bind(s,1167)),Promise.resolve().then(s.t.bind(s,6874,23))},6515:(e,r,s)=>{"use strict";s.d(r,{CartProvider:()=>d,_:()=>c});var a=s(5155),t=s(2115);let l=(0,t.createContext)(void 0);function c(){let e=(0,t.useContext)(l);if(void 0===e)throw Error("useCart debe ser usado dentro de un CartProvider");return e}function d(e){let{children:r}=e,[s,c]=(0,t.useState)([]);(0,t.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let r=JSON.parse(e);Array.isArray(r)?c(r):console.warn("El carrito guardado no tiene el formato esperado.")}catch(e){console.error("Error al cargar el carrito:",e)}},[]),(0,t.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(s))},[s]);let d=s.reduce((e,r)=>e+r.quantity,0),n=s.reduce((e,r)=>e+r.product.price*r.quantity,0),o=e=>{c(r=>r.filter(r=>r.product.id!==e))};return(0,a.jsx)(l.Provider,{value:{items:s,totalItems:d,totalPrice:n,addToCart:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c(s=>{let a=s.findIndex(r=>r.product.id===e.id);if(!(a>=0))return[...s,{product:e,quantity:r}];{let e=[...s];return e[a].quantity+=r,e}})},removeFromCart:o,updateQuantity:(e,r)=>{if(r<=0){o(e);return}c(s=>s.map(s=>s.product.id===e?{...s,quantity:r}:s))},clearCart:()=>{c([])}},children:r})}},7969:(e,r,s)=>{"use strict";s.d(r,{default:()=>x});var a=s(5155),t=s(2115),l=s(6874),c=s.n(l),d=s(5695),n=s(7809),o=s(7924),i=s(4416),m=s(4783),u=s(6515);function x(){let[e,r]=(0,t.useState)(!1),[s,l]=(0,t.useState)(""),x=(0,d.usePathname)(),{totalItems:h,totalPrice:p}=(0,u._)(),b=e=>{e.preventDefault(),console.log("Buscando: ".concat(s))},f=[{name:"Productos",href:"/productos"},{name:"Info",href:"/info"},{name:"Login",href:"/login"},{name:"Registrarse",href:"/registro"},{name:"Contacto",href:"/contacto"}];return(0,a.jsx)("header",{className:"border-b border-gray-200",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsx)(c(),{href:"/",className:"flex items-center space-x-2",children:(0,a.jsx)("img",{src:"/assets/logo/Recurso_22x.png",alt:"Templar Logo",className:"h-8 w-auto"})}),(0,a.jsxs)(c(),{href:"/carrito",className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{className:"mr-2",children:h})," ",(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{className:"ml-2",children:["$",p.toLocaleString("es-CL")]})," "]})]}),(0,a.jsxs)("nav",{className:"hidden md:flex justify-between items-center py-4",children:[(0,a.jsx)("ul",{className:"flex space-x-8",children:f.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(c(),{href:e.href,className:"text-sm uppercase tracking-wider ".concat(x===e.href?"font-semibold":""),children:e.name})},e.name))}),(0,a.jsxs)("form",{onSubmit:b,className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:s,onChange:e=>l(e.target.value),className:"py-1 pl-2 pr-8 border-b border-black focus:outline-none text-sm w-40"}),(0,a.jsx)("button",{type:"submit",className:"absolute right-0 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"md:hidden flex justify-between items-center py-4",children:[(0,a.jsx)("button",{onClick:()=>r(!e),"aria-label":"Toggle menu",children:e?(0,a.jsx)(i.A,{className:"h-6 w-6"}):(0,a.jsx)(m.A,{className:"h-6 w-6"})}),(0,a.jsxs)("form",{onSubmit:b,className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:s,onChange:e=>l(e.target.value),className:"py-1 pl-2 pr-8 border-b border-black focus:outline-none text-sm w-32"}),(0,a.jsx)("button",{type:"submit",className:"absolute right-0 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]})]}),e&&(0,a.jsx)("div",{className:"md:hidden py-4 border-t border-gray-200",children:(0,a.jsx)("ul",{className:"space-y-4",children:f.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(c(),{href:e.href,className:"block text-sm uppercase tracking-wider ".concat(x===e.href?"font-semibold":""),onClick:()=>r(!1),children:e.name})},e.name))})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[721,766,441,684,358],()=>r(3492)),_N_E=e.O()}]);