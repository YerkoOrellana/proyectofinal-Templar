(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570,811],{6515:(e,r,t)=>{"use strict";t.d(r,{CartProvider:()=>c,_:()=>l});var a=t(5155),s=t(2115);let n=(0,s.createContext)(void 0);function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useCart debe ser usado dentro de un CartProvider");return e}function c(e){let{children:r}=e,[t,l]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let r=JSON.parse(e);Array.isArray(r)?l(r):console.warn("El carrito guardado no tiene el formato esperado.")}catch(e){console.error("Error al cargar el carrito:",e)}},[]),(0,s.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(t))},[t]);let c=t.reduce((e,r)=>e+r.quantity,0),o=t.reduce((e,r)=>e+r.product.price*r.quantity,0),i=e=>{l(r=>r.filter(r=>r.product.id!==e))};return(0,a.jsx)(n.Provider,{value:{items:t,totalItems:c,totalPrice:o,addToCart:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l(t=>{let a=t.findIndex(r=>r.product.id===e.id);if(!(a>=0))return[...t,{product:e,quantity:r}];{let e=[...t];return e[a].quantity+=r,e}})},removeFromCart:i,updateQuantity:(e,r)=>{if(r<=0){i(e);return}l(t=>t.map(t=>t.product.id===e?{...t,quantity:r}:t))},clearCart:()=>{l([])}},children:r})}},6726:(e,r,t)=>{Promise.resolve().then(t.bind(t,7969)),Promise.resolve().then(t.t.bind(t,6874,23))},7969:(e,r,t)=>{"use strict";t.d(r,{default:()=>h});var a=t(5155),s=t(2115),n=t(6874),l=t.n(n),c=t(5695),o=t(7809),i=t(7924),d=t(4416),u=t(4783),m=t(6515);function h(){let[e,r]=(0,s.useState)(!1),[t,n]=(0,s.useState)(""),h=(0,c.usePathname)(),{totalItems:f,totalPrice:x}=(0,m._)(),p=e=>{e.preventDefault(),console.log("Buscando: ".concat(t))},b=[{name:"Productos",href:"/productos"},{name:"Info",href:"/info"},{name:"Login",href:"/login"},{name:"Registrarse",href:"/registro"},{name:"Contacto",href:"/contacto"}];return(0,a.jsx)("header",{className:"border-b border-gray-200",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsx)(l(),{href:"/",className:"flex items-center space-x-2",children:(0,a.jsx)("img",{src:"/assets/logo/Recurso_22x.png",alt:"Templar Logo",className:"h-8 w-auto"})}),(0,a.jsxs)(l(),{href:"/carrito",className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{className:"mr-2",children:f})," ",(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{className:"ml-2",children:["$",x.toLocaleString("es-CL")]})," "]})]}),(0,a.jsxs)("nav",{className:"hidden md:flex justify-between items-center py-4",children:[(0,a.jsx)("ul",{className:"flex space-x-8",children:b.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:e.href,className:"text-sm uppercase tracking-wider ".concat(h===e.href?"font-semibold":""),children:e.name})},e.name))}),(0,a.jsxs)("form",{onSubmit:p,className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:t,onChange:e=>n(e.target.value),className:"py-1 pl-2 pr-8 border-b border-black focus:outline-none text-sm w-40"}),(0,a.jsx)("button",{type:"submit",className:"absolute right-0 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"md:hidden flex justify-between items-center py-4",children:[(0,a.jsx)("button",{onClick:()=>r(!e),"aria-label":"Toggle menu",children:e?(0,a.jsx)(d.A,{className:"h-6 w-6"}):(0,a.jsx)(u.A,{className:"h-6 w-6"})}),(0,a.jsxs)("form",{onSubmit:p,className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:t,onChange:e=>n(e.target.value),className:"py-1 pl-2 pr-8 border-b border-black focus:outline-none text-sm w-32"}),(0,a.jsx)("button",{type:"submit",className:"absolute right-0 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})]})]}),e&&(0,a.jsx)("div",{className:"md:hidden py-4 border-t border-gray-200",children:(0,a.jsx)("ul",{className:"space-y-4",children:b.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:e.href,className:"block text-sm uppercase tracking-wider ".concat(h===e.href?"font-semibold":""),onClick:()=>r(!1),children:e.name})},e.name))})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[721,441,684,358],()=>r(6726)),_N_E=e.O()}]);